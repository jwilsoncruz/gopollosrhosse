<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Go Pollos Rhosse</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600;700&display=swap" rel="stylesheet">

<style>
:root{
--azul:#0d1b2a;
--azul2:#1b263b;
--naranja:#ff7b00;
--card:rgba(255,255,255,0.05);
}

body{
margin:0;
font-family:'Poppins',sans-serif;
background:var(--azul);
color:white;
}

.app{
max-width:520px;
margin:auto;
padding:20px;
}

.logo{text-align:center;margin-bottom:10px;cursor:pointer;}
.logo img{width:150px;}

.info{
text-align:center;
font-size:13px;
opacity:.7;
margin-bottom:15px;
}

.stock{
background:var(--card);
padding:12px;
border-radius:15px;
text-align:center;
margin-bottom:10px;
}

.stock strong{
color:var(--naranja);
font-size:18px;
}

.timer{
text-align:center;
font-size:13px;
opacity:.7;
margin-bottom:20px;
}

.card{
background:var(--card);
border-radius:20px;
overflow:hidden;
margin-bottom:18px;
box-shadow:0 8px 30px rgba(0,0,0,.4);
}

.card img{
width:100%;
height:200px;
object-fit:cover;
transition:.4s;
}

.card:hover img{
transform:scale(1.05);
}

.content{
padding:15px;
}

.price{
color:var(--naranja);
font-weight:600;
margin-bottom:10px;
}

.controls{
display:flex;
gap:10px;
justify-content:center;
}

button{
border:none;
border-radius:30px;
padding:8px 15px;
font-weight:600;
cursor:pointer;
transition:.3s;
}

.add{background:var(--azul2);color:white;}
.add:hover{background:var(--naranja);}
.remove{background:#333;color:white;}

.cart{
background:var(--card);
padding:15px;
border-radius:20px;
margin-top:20px;
}

.whatsapp{
background:var(--naranja);
width:100%;
padding:12px;
color:white;
font-size:15px;
margin-top:10px;
}

.agotado{
background:#550000;
padding:10px;
border-radius:10px;
text-align:center;
margin-top:10px;
color:#ffaaaa;
}

.admin{
display:none;
margin-top:15px;
text-align:center;
opacity:.7;
}

.admin button{
margin:5px;
}

</style>
</head>

<body>
<div class="app">

<div class="logo" onclick="tapLogo()">
<img src="logo.png" alt="Go Pollos Rhosse">
</div>

<div class="info">
Av. Moxos ‚Ä¢ 6:30pm a 10:30pm
</div>

<div class="stock">
üî• Disponibles: <strong><span id="available">8</span></strong> / 8
</div>

<div class="timer">
‚è≥ Cierre en <span id="countdown"></span>
</div>

<div id="productos"></div>

<div class="cart">
<h3>üõí Tu Pedido</h3>
<div id="resumen"></div>
<h3>Total: Bs <span id="total">0</span></h3>
<button class="whatsapp" onclick="sendOrder()">Reservar por WhatsApp</button>
<div id="agotadoMsg"></div>

<div class="admin" id="adminPanel">
<button onclick="adjustStock(-1)">‚ûñ -1</button>
<button onclick="adjustStock(1)">‚ûï +1</button>
<button onclick="resetStock()">üîÑ Reset</button>
</div>

</div>

</div>

<script>
let maxStock = 8;
let stock = parseFloat(localStorage.getItem("stock")) || 8;
let tapCount = 0;
let adminActive = false;

let productos = [
{name:"Completo", precio:100, consumo:1, img:"completo.jpg"},
{name:"Medio", precio:59, consumo:0.5, img:"medio.jpg"},
{name:"Cuarto", precio:25, consumo:0, img:"cuarto.jpg"},
{name:"Econ√≥mico", precio:15, consumo:0, img:"economico.jpg"}
];

let carrito = JSON.parse(localStorage.getItem("carrito")) || {};

function renderProductos(){
let cont = document.getElementById("productos");
cont.innerHTML="";
productos.forEach((p,i)=>{
cont.innerHTML+=`
<div class="card">
<img src="${p.img}">
<div class="content">
<h3>${p.name}</h3>
<div class="price">Bs ${p.precio}</div>
<div class="controls">
<button class="add" onclick="add(${i})">Agregar</button>
<button class="remove" onclick="remove(${i})">Eliminar</button>
</div>
</div>
</div>`;
});
}

function add(i){
let p=productos[i];
if(p.consumo>0 && stock-p.consumo<0) return;
carrito[p.name]=(carrito[p.name]||0)+1;
stock-=p.consumo;
update();
}

function remove(i){
let p=productos[i];
if(!carrito[p.name]) return;
carrito[p.name]--;
if(carrito[p.name]<=0) delete carrito[p.name];
stock+=p.consumo;
update();
}

function update(){
localStorage.setItem("carrito",JSON.stringify(carrito));
localStorage.setItem("stock",stock);

document.getElementById("available").innerText=stock;

let resumen="";
let total=0;
for(let k in carrito){
let p=productos.find(x=>x.name==k);
let subtotal=carrito[k]*p.precio;
total+=subtotal;
resumen+=`${k} x${carrito[k]} = Bs ${subtotal}<br>`;
}
document.getElementById("resumen").innerHTML=resumen||"Sin productos";
document.getElementById("total").innerText=total;

if(stock<=0){
document.getElementById("agotadoMsg").innerHTML="<div class='agotado'>üî• POLLOS AGOTADOS</div>";
}else{
document.getElementById("agotadoMsg").innerHTML="";
}
}

function sendOrder(){
if(Object.keys(carrito).length==0){
alert("Agrega productos primero");
return;
}
let mensaje="Hola, quiero reservar:\n";
for(let k in carrito){
mensaje+=`${k} x${carrito[k]}\n`;
}
mensaje+=`Total Bs ${document.getElementById("total").innerText}`;
window.open(`https://wa.me/59168972863?text=${encodeURIComponent(mensaje)}`,'_blank');
}

function countdown(){
let close=new Date();
close.setHours(22,30,0);
setInterval(()=>{
let now=new Date();
let diff=close-now;
if(diff<=0){
document.getElementById("countdown").innerText="Cerrado";
return;
}
let h=Math.floor(diff/1000/60/60);
let m=Math.floor(diff/1000/60)%60;
let s=Math.floor(diff/1000)%60;
document.getElementById("countdown").innerText=`${h}h ${m}m ${s}s`;
},1000);
}

function tapLogo(){
tapCount++;
if(tapCount>=5){
let pass=prompt("Clave administrador:");
if(pass==="1234"){
adminActive=true;
document.getElementById("adminPanel").style.display="block";
}
tapCount=0;
}
}

function adjustStock(val){
stock+=val;
if(stock<0) stock=0;
if(stock>8) stock=8;
update();
}

function resetStock(){
stock=8;
carrito={};
update();
}

renderProductos();
update();
countdown();
</script>

</body>
</html>
